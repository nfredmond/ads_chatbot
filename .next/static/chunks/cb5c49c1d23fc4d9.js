(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7913,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22016),i=e.i(71689),l=e.i(12426),n=e.i(25652),o=e.i(20278),c=e.i(7899),d=e.i(57086),m=e.i(87316),u=e.i(64659),p=e.i(7486),x=e.i(42009),h=e.i(86536),f=e.i(95361),v=e.i(96481),g=e.i(70016),b=e.i(78631),y=e.i(25949),j=e.i(33369),N=["axis","item"],C=(0,r.forwardRef)((e,t)=>r.createElement(j.CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:N,tooltipPayloadSearcher:y.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),w=e.i(75225),S=e.i(85183),k=e.i(93230),D=e.i(72526),A=e.i(34239),P=e.i(31195),E=r,I=e.i(7670),O=e.i(72733),R=e.i(97865),T=e.i(69212),L=e.i(86031),$=e.i(62728),F=e.i(94395),K=e.i(79812),M=e.i(81977),B=e.i(41818),_=e.i(844),z=e.i(59798),W=e.i(61849),G=e.i(61764),Y=e.i(46710),V=e.i(92860),Q=e.i(91526),U=e.i(77320),J=(e,t,r,a)=>(0,G.selectAxisWithScale)(e,"xAxis",t,a),X=(e,t,r,a)=>(0,G.selectTicksOfGraphicalItem)(e,"xAxis",t,a),Z=(e,t,r,a)=>(0,G.selectAxisWithScale)(e,"yAxis",r,a),q=(e,t,r,a)=>(0,G.selectTicksOfGraphicalItem)(e,"yAxis",r,a),H=(0,W.createSelector)([Y.selectChartLayout,J,Z,X,q],(e,t,r,a,s)=>(0,K.isCategoricalAxis)(e,"xAxis")?(0,K.getBandSizeOfAxis)(t,a,!1):(0,K.getBandSizeOfAxis)(r,s,!1)),ee=(0,W.createSelector)([G.selectUnfilteredCartesianItems,(e,t,r,a,s)=>s],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),et=(0,W.createSelector)([Y.selectChartLayout,J,Z,X,q,(e,t,r,a,s)=>{var i,l,n=ee(e,t,r,a,s);if(null!=n){var o=(0,Y.selectChartLayout)(e);if(null!=(l=(0,K.isCategoricalAxis)(o,"xAxis")?(0,G.selectStackGroups)(e,"yAxis",r,a):(0,G.selectStackGroups)(e,"xAxis",t,a))){var{stackId:c}=n,d=(0,Q.getStackSeriesIdentifier)(n);if(null!=c&&null!=d){var m=null==(i=l[c])?void 0:i.stackedData;return null==m?void 0:m.find(e=>e.key===d)}}}},V.selectChartDataWithIndexesIfNotInPanorama,H,ee,U.selectChartBaseValue],(e,t,r,a,s,i,l,n,o,c)=>{var d,{chartData:m,dataStartIndex:u,dataEndIndex:p}=l;if(null!=o&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=r&&null!=a&&null!=s&&0!==a.length&&0!==s.length&&null!=n){var{data:x}=o;if(null!=(d=x&&x.length>0?x:null==m?void 0:m.slice(u,p+1)))return function(e){var t,{areaSettings:{connectNulls:r,baseValue:a,dataKey:s},stackedData:i,layout:l,chartBaseValue:n,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:m,xAxisTicks:u,yAxisTicks:p,bandSize:x}=e,h=i&&i.length,f=((e,t,r,a,s)=>{var i=null!=r?r:t;if((0,F.isNumber)(i))return i;var l="horizontal"===e?s:a,n=l.scale.domain();if("number"===l.type){var o=Math.max(n[0],n[1]),c=Math.min(n[0],n[1]);return"dataMin"===i?c:"dataMax"===i||o<0?o:Math.max(Math.min(n[0],n[1]),0)}return"dataMin"===i?n[0]:"dataMax"===i?n[1]:n[0]})(l,n,a,o,c),v="horizontal"===l,g=!1,b=d.map((e,t)=>{h?a=i[m+t]:Array.isArray(a=(0,K.getValueByDataKey)(e,s))?g=!0:a=[f,a];var a,l=null==a[1]||h&&!r&&null==(0,K.getValueByDataKey)(e,s);return v?{x:(0,K.getCateCoordinateOfLine)({axis:o,ticks:u,bandSize:x,entry:e,index:t}),y:l?null:c.scale(a[1]),value:a,payload:e}:{x:l?null:o.scale(a[1]),y:(0,K.getCateCoordinateOfLine)({axis:c,ticks:p,bandSize:x,entry:e,index:t}),value:a,payload:e}});return t=h||g?b.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return v?{x:e.x,y:null!=t&&null!=e.y?c.scale(t):null,payload:e.payload}:{x:null!=t?o.scale(t):null,y:e.y,payload:e.payload}}):v?c.scale(f):o.scale(f),{points:b,baseLine:t,isRange:g}}({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:s,dataStartIndex:u,areaSettings:o,stackedData:i,displayedData:d,chartBaseValue:c,bandSize:n})}}),er=e.i(75337),ea=e.i(75502),es=e.i(95146),ei=e.i(27241),el=e.i(40657),en=e.i(51883),eo=e.i(22075),ec=e.i(52734),ed=e.i(15549),em=e.i(91187),eu=e.i(57999),ep=e.i(66576),ex=e.i(81583),eh=e.i(43404),ef=e.i(29601),ev=e.i(18457),eg=e.i(20135),eb=["id"],ey=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function ej(){return(ej=Object.assign.bind()).apply(null,arguments)}function eN(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(({}).hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ew(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eS(e,t){return e&&"none"!==e?e:t}var ek=E.memo(e=>{var{dataKey:t,data:r,stroke:a,strokeWidth:s,fill:i,name:l,hide:n,unit:o,tooltipType:c}=e,d={dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:(0,K.getTooltipNameProp)(l,t),hide:n,type:c,color:eS(a,i),unit:o}};return E.createElement(_.SetTooltipEntrySettings,{tooltipEntrySettings:d})});function eD(e){var{clipPathId:t,points:r,props:a}=e,{needClip:s,dot:i,dataKey:l}=a,n=(0,eu.svgPropertiesNoEvents)(a);return E.createElement(L.Dots,{points:r,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:l,baseProps:n,needClip:s,clipPathId:t})}function eA(e){var{showLabels:t,children:r,points:a}=e,s=a.map(e=>{var t,r,a={x:null!=(t=e.x)?t:0,y:null!=(r=e.y)?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ew(ew({},a),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:a,fill:void 0})});return E.createElement(T.CartesianLabelListContextProvider,{value:t?s:void 0},r)}function eP(e){var{points:t,baseLine:r,needClip:a,clipPathId:s,props:i}=e,{layout:l,type:n,stroke:o,connectNulls:c,isRange:d}=i,{id:m}=i,u=eN(i,eb),p=(0,eu.svgPropertiesNoEvents)(u),x=(0,eh.svgPropertiesAndEvents)(u);return E.createElement(E.Fragment,null,(null==t?void 0:t.length)>1&&E.createElement(R.Layer,{clipPath:a?"url(#clipPath-".concat(s,")"):void 0},E.createElement(O.Curve,ej({},x,{id:m,points:t,connectNulls:c,type:n,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),"none"!==o&&E.createElement(O.Curve,ej({},p,{className:"recharts-area-curve",layout:l,type:n,connectNulls:c,fill:"none",points:t})),"none"!==o&&d&&E.createElement(O.Curve,ej({},p,{className:"recharts-area-curve",layout:l,type:n,connectNulls:c,fill:"none",points:r}))),E.createElement(eD,{points:t,props:u,clipPathId:s}))}function eE(e){var{alpha:t,baseLine:r,points:a,strokeWidth:s}=e,i=a[0].y,l=a[a.length-1].y;if(!(0,eo.isWellBehavedNumber)(i)||!(0,eo.isWellBehavedNumber)(l))return null;var n=t*Math.abs(i-l),o=Math.max(...a.map(e=>e.x||0));return((0,F.isNumber)(r)?o=Math.max(r,o):r&&Array.isArray(r)&&r.length&&(o=Math.max(...r.map(e=>e.x||0),o)),(0,F.isNumber)(o))?E.createElement("rect",{x:0,y:i<l?i:i-n,width:o+(s?parseInt("".concat(s),10):1),height:Math.floor(n)}):null}function eI(e){var{alpha:t,baseLine:r,points:a,strokeWidth:s}=e,i=a[0].x,l=a[a.length-1].x;if(!(0,eo.isWellBehavedNumber)(i)||!(0,eo.isWellBehavedNumber)(l))return null;var n=t*Math.abs(i-l),o=Math.max(...a.map(e=>e.y||0));return((0,F.isNumber)(r)?o=Math.max(r,o):r&&Array.isArray(r)&&r.length&&(o=Math.max(...r.map(e=>e.y||0),o)),(0,F.isNumber)(o))?E.createElement("rect",{x:i<l?i:i-n,y:0,width:n,height:Math.floor(o+(s?parseInt("".concat(s),10):1))}):null}function eO(e){var{alpha:t,layout:r,points:a,baseLine:s,strokeWidth:i}=e;return"vertical"===r?E.createElement(eE,{alpha:t,points:a,baseLine:s,strokeWidth:i}):E.createElement(eI,{alpha:t,points:a,baseLine:s,strokeWidth:i})}function eR(e){var{needClip:t,clipPathId:r,props:a,previousPointsRef:s,previousBaselineRef:i}=e,{points:l,baseLine:n,isAnimationActive:o,animationBegin:c,animationDuration:d,animationEasing:m,onAnimationStart:u,onAnimationEnd:p}=a,x=(0,E.useMemo)(()=>({points:l,baseLine:n}),[l,n]),h=(0,el.useAnimationId)(x,"recharts-area-"),f=(0,Y.useCartesianChartLayout)(),[v,g]=(0,E.useState)(!1),b=(0,E.useCallback)(()=>{"function"==typeof p&&p(),g(!1)},[p]),y=(0,E.useCallback)(()=>{"function"==typeof u&&u(),g(!0)},[u]);if(null==f)return null;var j=s.current,N=i.current;return E.createElement(eA,{showLabels:!v,points:l},a.children,E.createElement(ep.JavascriptAnimate,{animationId:h,begin:c,duration:d,isActive:o,easing:m,onAnimationEnd:b,onAnimationStart:y,key:h},e=>{if(j){var c,d=j.length/l.length,m=1===e?l:l.map((t,r)=>{var a=Math.floor(r*d);if(j[a]){var s=j[a];return ew(ew({},t),{},{x:(0,F.interpolate)(s.x,t.x,e),y:(0,F.interpolate)(s.y,t.y,e)})}return t});return c=(0,F.isNumber)(n)?(0,F.interpolate)(N,n,e):(0,F.isNullish)(n)||(0,F.isNan)(n)?(0,F.interpolate)(N,0,e):n.map((t,r)=>{var a=Math.floor(r*d);if(Array.isArray(N)&&N[a]){var s=N[a];return ew(ew({},t),{},{x:(0,F.interpolate)(s.x,t.x,e),y:(0,F.interpolate)(s.y,t.y,e)})}return t}),e>0&&(s.current=m,i.current=c),E.createElement(eP,{points:m,baseLine:c,needClip:t,clipPathId:r,props:a})}return e>0&&(s.current=l,i.current=n),E.createElement(R.Layer,null,o&&E.createElement("defs",null,E.createElement("clipPath",{id:"animationClipPath-".concat(r)},E.createElement(eO,{alpha:e,points:l,baseLine:n,layout:f,strokeWidth:a.strokeWidth}))),E.createElement(R.Layer,{clipPath:"url(#animationClipPath-".concat(r,")")},E.createElement(eP,{points:l,baseLine:n,needClip:t,clipPathId:r,props:a})))}),E.createElement(T.LabelListFromLabelProp,{label:a.label}))}function eT(e){var{needClip:t,clipPathId:r,props:a}=e,s=(0,E.useRef)(null),i=(0,E.useRef)();return E.createElement(eR,{needClip:t,clipPathId:r,props:a,previousPointsRef:s,previousBaselineRef:i})}class eL extends E.PureComponent{render(){var{hide:e,dot:t,points:r,className:a,top:s,left:i,needClip:l,xAxisId:n,yAxisId:o,width:c,height:d,id:m,baseLine:u,zIndex:p}=this.props;if(e)return null;var x=(0,I.clsx)("recharts-area",a),{r:h,strokeWidth:f}=(0,ex.getRadiusAndStrokeWidthFromDot)(t),v=(0,M.isClipDot)(t),g=2*h+f,b=l?"url(#clipPath-".concat(v?"":"dots-").concat(m,")"):void 0;return E.createElement(ef.ZIndexLayer,{zIndex:p},E.createElement(R.Layer,{className:x},l&&E.createElement("defs",null,E.createElement(z.GraphicalItemClipPath,{clipPathId:m,xAxisId:n,yAxisId:o}),!v&&E.createElement("clipPath",{id:"clipPath-dots-".concat(m)},E.createElement("rect",{x:i-g/2,y:s-g/2,width:c+g,height:d+g}))),E.createElement(eT,{needClip:l,clipPathId:m,props:this.props})),E.createElement(B.ActivePoints,{points:r,mainColor:eS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:b}),this.props.isRange&&Array.isArray(u)&&E.createElement(B.ActivePoints,{points:u,mainColor:eS(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:b}))}}var e$={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ev.DefaultZIndexes.area};function eF(e){var t,r=(0,en.resolveDefaultProps)(e,e$),{activeDot:a,animationBegin:s,animationDuration:i,animationEasing:l,connectNulls:n,dot:o,fill:c,fillOpacity:d,hide:m,isAnimationActive:u,legendType:p,stroke:x,xAxisId:h,yAxisId:f}=r,v=eN(r,ey),g=(0,Y.useChartLayout)(),b=(0,ea.useChartName)(),{needClip:y}=(0,z.useNeedsClip)(h,f),j=(0,er.useIsPanorama)(),{points:N,isRange:C,baseLine:w}=null!=(t=(0,ei.useAppSelector)(t=>et(t,h,f,j,e.id)))?t:{},S=(0,ec.usePlotArea)();if("horizontal"!==g&&"vertical"!==g||null==S||"AreaChart"!==b&&"ComposedChart"!==b)return null;var{height:k,width:D,x:A,y:P}=S;return N&&N.length?E.createElement(eL,ej({},v,{activeDot:a,animationBegin:s,animationDuration:i,animationEasing:l,baseLine:w,connectNulls:n,dot:o,fill:c,fillOpacity:d,height:k,hide:m,layout:g,isAnimationActive:"auto"===u?!$.Global.isSsr:u,isRange:C,legendType:p,needClip:y,points:N,stroke:x,width:D,left:A,top:P,xAxisId:h,yAxisId:f})):null}var eK=E.memo(function(e){var t=(0,en.resolveDefaultProps)(e,e$),r=(0,er.useIsPanorama)();return E.createElement(ed.RegisterGraphicalItemId,{id:t.id,type:"area"},e=>E.createElement(E.Fragment,null,E.createElement(es.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:r,stroke:a,fill:s,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:eS(a,s),value:(0,K.getTooltipNameProp)(r,t),payload:e}]})(t)}),E.createElement(ek,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),E.createElement(em.SetCartesianGraphicalItem,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:(0,K.getNormalizedStackId)(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),E.createElement(eF,ej({},t,{id:e}))))},eg.propsAreEqual);eK.displayName="Area";var eM=["axis"],eB=(0,r.forwardRef)((e,t)=>r.createElement(j.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eM,tooltipPayloadSearcher:y.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),e_=e.i(22787);let ez=[{id:"last7",label:"Last 7 Days"},{id:"last30",label:"Last 30 Days"},{id:"thisQuarter",label:"This Quarter"},{id:"lastQuarter",label:"Last Quarter"},{id:"ytd",label:"Year to Date"},{id:"lastYear",label:"Last Year"},{id:"custom",label:"Custom Range"}];function eW(e){let t=new Date,r=t.toISOString().split("T")[0];switch(e){case"last7":{let e=new Date(t);return e.setDate(t.getDate()-7),{startDate:e.toISOString().split("T")[0],endDate:r}}case"last30":{let e=new Date(t);return e.setDate(t.getDate()-30),{startDate:e.toISOString().split("T")[0],endDate:r}}case"thisQuarter":{let e=Math.floor(t.getMonth()/3);return{startDate:new Date(t.getFullYear(),3*e,1).toISOString().split("T")[0],endDate:r}}case"lastQuarter":{let e=(Math.floor(t.getMonth()/3)-1)*3,r=e<0?t.getFullYear()-1:t.getFullYear(),a=e<0?9:e,s=new Date(r,a,1),i=new Date(r,a+3,0);return{startDate:s.toISOString().split("T")[0],endDate:i.toISOString().split("T")[0]}}case"ytd":return{startDate:new Date(t.getFullYear(),0,1).toISOString().split("T")[0],endDate:r};case"lastYear":{let e=new Date(t.getFullYear()-1,0,1),r=new Date(t.getFullYear()-1,11,31);return{startDate:e.toISOString().split("T")[0],endDate:r.toISOString().split("T")[0]}}default:return{startDate:r,endDate:r}}}let eG={spend:{title:"Total Spend Analysis",description:"Detailed breakdown of advertising spend across all clients",icon:l.DollarSign,color:"blue",dataKey:"spend",format:e=>`$${e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,sortKey:"spend",compareKey:"revenue"},revenue:{title:"Revenue Analysis",description:"Revenue generated from advertising campaigns",icon:n.TrendingUp,color:"emerald",dataKey:"revenue",format:e=>`$${e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,sortKey:"revenue",compareKey:"spend"},roas:{title:"ROAS Analysis",description:"Return on Ad Spend performance by client",icon:o.Target,color:"purple",dataKey:"roas",format:e=>`${e.toFixed(2)}x`,sortKey:"roas",benchmark:{good:2,excellent:4}},conversions:{title:"Conversions Analysis",description:"Conversion performance and trends across campaigns",icon:c.MousePointerClick,color:"amber",dataKey:"conversions",format:e=>e.toLocaleString(),sortKey:"conversions"},ctr:{title:"Click-Through Rate Analysis",description:"CTR performance and engagement metrics",icon:d.Percent,color:"cyan",dataKey:"clicks",format:e=>`${e.toFixed(2)}%`,sortKey:"ctr",benchmark:{good:2,excellent:5}},cpc:{title:"Cost Per Click Analysis",description:"CPC efficiency across clients and campaigns",icon:l.DollarSign,color:"pink",dataKey:"spend",format:e=>`$${e.toFixed(2)}`,sortKey:"cpc"}},eY=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316"];function eV(){let e=(0,a.useParams)(),l=(0,a.useRouter)(),n=e.metric,[o,c]=(0,r.useState)(null),[d,y]=(0,r.useState)(!0),[j,N]=(0,r.useState)(!1),[E,I]=(0,r.useState)("last30"),[O,R]=(0,r.useState)(()=>eW("last30")),[T,L]=(0,r.useState)(!1),[$,F]=(0,r.useState)(!1),[K,M]=(0,r.useState)([]),[B,_]=(0,r.useState)([]),[z,W]=(0,r.useState)(!1),G=(0,r.useRef)(null),Y=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=sessionStorage.getItem("dashboardFilters");if(e)try{let t=JSON.parse(e);t.datePreset&&I(t.datePreset),t.customDateRange&&R(t.customDateRange),t.selectedCustomers&&_(t.selectedCustomers)}catch(e){console.error("Failed to parse saved filters:",e)}},[]),(0,r.useEffect)(()=>{sessionStorage.setItem("dashboardFilters",JSON.stringify({datePreset:E,customDateRange:O,selectedCustomers:B}))},[E,O,B]),(0,r.useEffect)(()=>{function e(e){G.current&&!G.current.contains(e.target)&&L(!1),Y.current&&!Y.current.contains(e.target)&&W(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let V=async()=>{try{let e="true"===localStorage.getItem("demo_mode");if(N(e),e){c({metrics:{totalSpend:41340,totalConversions:694,averageROAS:3.7,totalImpressions:285e4,totalClicks:48500,totalRevenue:152958,ctr:1.7,cpc:.85,convRate:1.43},performanceData:[{date:"10/15",spend:2800,revenue:8400,clicks:3200,conversions:45},{date:"10/17",spend:3200,revenue:9600,clicks:3800,conversions:52},{date:"10/19",spend:2900,revenue:10200,clicks:3400,conversions:58},{date:"10/21",spend:3100,revenue:11500,clicks:3600,conversions:61},{date:"10/23",spend:3400,revenue:12100,clicks:4e3,conversions:68},{date:"10/25",spend:3e3,revenue:11800,clicks:3500,conversions:64},{date:"10/27",spend:3500,revenue:12500,clicks:4100,conversions:72},{date:"10/29",spend:2800,revenue:10800,clicks:3300,conversions:55}],customerMetrics:[{customer_name:"Demo Client A",customer_id:"1",spend:15e3,revenue:6e4,conversions:250,clicks:12e3,impressions:4e5,ctr:3,cpc:1.25,convRate:2.08,roas:4},{customer_name:"Demo Client B",customer_id:"2",spend:12e3,revenue:42e3,conversions:180,clicks:1e4,impressions:35e4,ctr:2.86,cpc:1.2,convRate:1.8,roas:3.5},{customer_name:"Demo Client C",customer_id:"3",spend:8e3,revenue:28e3,conversions:120,clicks:8e3,impressions:28e4,ctr:2.86,cpc:1,convRate:1.5,roas:3.5}],availableCustomers:[]}),y(!1);return}let t=new URLSearchParams,r="custom"===E?O:eW(E);t.set("startDate",r.startDate),t.set("endDate",r.endDate),B.length>0&&t.set("customers",B.join(","));let a=await fetch(`/api/data?${t.toString()}`);if(a.ok){let e=await a.json();e.availableCustomers?.length>0&&M(e.availableCustomers),c({metrics:{totalSpend:e.metrics?.totalSpend||0,totalConversions:e.metrics?.totalConversions||0,averageROAS:e.metrics?.averageROAS||0,totalImpressions:e.metrics?.totalImpressions||0,totalClicks:e.metrics?.totalClicks||0,totalRevenue:e.metrics?.totalRevenue||0,ctr:e.metrics?.totalImpressions>0?e.metrics.totalClicks/e.metrics.totalImpressions*100:0,cpc:e.metrics?.totalClicks>0?e.metrics.totalSpend/e.metrics.totalClicks:0,convRate:e.metrics?.totalClicks>0?e.metrics.totalConversions/e.metrics.totalClicks*100:0},performanceData:e.performanceData||[],customerMetrics:e.customerMetrics||[],availableCustomers:e.availableCustomers||[]})}}catch(e){console.error("Failed to fetch data:",e)}finally{y(!1)}};(0,r.useEffect)(()=>{V()},[E,O,B]);let Q=eG[n];if(!Q)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,t.jsx)("p",{className:"text-xl text-gray-400",children:"Metric not found"}),(0,t.jsx)(s.default,{href:"/dashboard",className:"mt-4 text-purple-400 hover:text-purple-300",children:"← Back to Dashboard"})]});if(d)return(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})});if(!o)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,t.jsx)("p",{className:"text-xl text-gray-400",children:"No data available"}),(0,t.jsx)(s.default,{href:"/dashboard",className:"mt-4 text-purple-400 hover:text-purple-300",children:"← Back to Dashboard"})]});let{metrics:U,performanceData:J,customerMetrics:X}=o,Z=Q.icon,q=[...X].sort((e,t)=>{let r=e[Q.sortKey],a=t[Q.sortKey];return"cpc"===Q.sortKey?r-a:a-r}),H=e=>{switch(n){case"spend":return e.spend;case"revenue":return e.revenue;case"roas":return e.roas;case"conversions":return e.conversions;case"ctr":return e.ctr;case"cpc":return e.cpc;default:return 0}},ee=K.reduce((e,t)=>(e[t.platform]||(e[t.platform]=[]),e[t.platform].push(t),e),{}),et={blue:"from-blue-500/20 to-blue-600/5 border-blue-500/20 text-blue-400",emerald:"from-emerald-500/20 to-emerald-600/5 border-emerald-500/20 text-emerald-400",purple:"from-purple-500/20 to-purple-600/5 border-purple-500/20 text-purple-400",amber:"from-amber-500/20 to-amber-600/5 border-amber-500/20 text-amber-400",cyan:"from-cyan-500/20 to-cyan-600/5 border-cyan-500/20 text-cyan-400",pink:"from-pink-500/20 to-pink-600/5 border-pink-500/20 text-pink-400"};return(0,t.jsxs)("div",{className:"space-y-6",children:[j&&(0,t.jsx)("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4 flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(h.Eye,{className:"w-5 h-5 text-emerald-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-emerald-400",children:"Demo Mode Active"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Viewing sample data"})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>l.push("/dashboard"),className:"p-2 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors",children:(0,t.jsx)(i.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:`p-3 rounded-xl bg-gradient-to-br ${et[Q.color]}`,children:(0,t.jsx)(Z,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:Q.title}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:Q.description})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(f.ExportDropdown,{onExportPDF:()=>{let e="custom"===E?O:eW(E),t=(()=>{switch(n){case"spend":return`$${U.totalSpend.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"revenue":return`$${U.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`;case"roas":return`${U.averageROAS.toFixed(2)}x`;case"conversions":return U.totalConversions.toLocaleString();case"ctr":return`${U.ctr.toFixed(2)}%`;case"cpc":return`$${U.cpc.toFixed(2)}`;default:return"0"}})(),r=(0,v.generateMetricPDF)(Q.title,Q.description,t,q,{start:e.startDate,end:e.endDate},Q.sortKey);(0,v.downloadPDF)(r,`${n}-analysis-${e.startDate}-to-${e.endDate}`)},onExportExcel:()=>{let e="custom"===E?O:eW(E),t=g.utils.book_new(),r=[[`${Q.title}`],[`Report Period: ${e.startDate} - ${e.endDate}`],[`Generated: ${new Date().toLocaleString()}`],[],["Summary Metrics"],["Metric","Value"],["Total Spend",U.totalSpend],["Total Revenue",U.totalRevenue],["ROAS",U.averageROAS],["Conversions",U.totalConversions],["CTR (%)",U.ctr],["CPC",U.cpc]],a=g.utils.aoa_to_sheet(r);g.utils.book_append_sheet(t,a,"Summary");let s=["Rank","Client",Q.title,"Spend","Revenue","ROAS","Conversions","CTR (%)","CPC"],i=q.map((e,t)=>[t+1,e.customer_name,e[Q.sortKey],e.spend,e.revenue,e.roas,e.conversions,e.ctr,e.cpc]),l=g.utils.aoa_to_sheet([s,...i]);g.utils.book_append_sheet(t,l,"Client Rankings");let o=new Blob([g.write(t,{bookType:"xlsx",type:"array"})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,b.saveAs)(o,`${n}-analysis-${e.startDate}-to-${e.endDate}.xlsx`)},disabled:0===q.length}),(0,t.jsxs)("div",{className:"relative",ref:G,children:[(0,t.jsxs)("button",{onClick:()=>L(!T),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors text-sm",children:[(0,t.jsx)(m.Calendar,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{children:"custom"===E?`${O.startDate} - ${O.endDate}`:ez.find(e=>e.id===E)?.label||"Last 30 Days"}),(0,t.jsx)(u.ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),T&&(0,t.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-64 p-3 rounded-xl bg-gray-900 border border-white/10 shadow-xl z-50",children:[(0,t.jsx)("div",{className:"space-y-1 mb-3",children:ez.map(e=>(0,t.jsx)("button",{onClick:()=>{var t;I(t=e.id),"custom"===t?F(!0):(F(!1),R(eW(t)),L(!1))},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${E===e.id?"bg-purple-600 text-white":"hover:bg-white/10 text-gray-300"}`,children:e.label},e.id))}),$&&(0,t.jsxs)("div",{className:"pt-3 border-t border-white/10 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:O.startDate,onChange:e=>R(t=>({...t,startDate:e.target.value})),className:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:O.endDate,onChange:e=>R(t=>({...t,endDate:e.target.value})),className:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-sm"})]}),(0,t.jsx)("button",{onClick:()=>{L(!1)},className:"w-full py-2 rounded-lg bg-purple-600 hover:bg-purple-500 text-white text-sm font-medium",children:"Apply"})]})]})]}),!j&&K.length>0&&(0,t.jsxs)("div",{className:"relative",ref:Y,children:[(0,t.jsxs)("button",{onClick:()=>W(!z),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-colors text-sm",children:[(0,t.jsx)(p.Building2,{className:"w-4 h-4 text-gray-400"}),(0,t.jsx)("span",{children:(()=>{if(0===B.length)return"All Customers";if(1===B.length){let e=K.find(e=>e.id===B[0]);return e?.name||"1 Customer"}return`${B.length} Customers`})()}),(0,t.jsx)(u.ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),z&&(0,t.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-80 p-3 rounded-xl bg-gray-900 border border-white/10 shadow-xl z-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Filter by Client"}),B.length>0&&(0,t.jsx)("button",{onClick:()=>_([]),className:"text-xs text-purple-400 hover:text-purple-300",children:"Clear"})]}),(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Object.entries(ee).map(([e,r])=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 font-medium uppercase tracking-wider mb-1 px-1",children:e}),r.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 px-2 py-1.5 rounded hover:bg-white/5 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:B.includes(e.id),onChange:()=>{var t;return t=e.id,void _(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"w-4 h-4 rounded border-white/20 bg-white/5 text-purple-600"}),(0,t.jsx)("span",{className:"text-sm truncate",children:e.name})]},e.id))]},e))})]})]})]})]}),(0,t.jsx)("div",{className:`p-6 rounded-xl bg-gradient-to-br ${et[Q.color]} border`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm opacity-80 mb-1",children:["Total ",Q.title.replace(" Analysis","")]}),(0,t.jsx)("p",{className:"text-4xl font-bold",children:Q.format((()=>{switch(n){case"spend":return U.totalSpend;case"revenue":return U.totalRevenue;case"roas":return U.averageROAS;case"conversions":return U.totalConversions;case"ctr":return U.ctr;case"cpc":return U.cpc;default:return 0}})())})]}),(0,t.jsx)(Z,{className:"w-12 h-12 opacity-50"})]})}),(0,t.jsxs)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:[Q.title.replace(" Analysis","")," Over Time"]}),(0,t.jsx)(P.ResponsiveContainer,{width:"100%",height:300,children:(0,t.jsxs)(eB,{data:J,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:`gradient-${n}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:eY[0],stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:eY[0],stopOpacity:0})]})}),(0,t.jsx)(D.CartesianGrid,{strokeDasharray:"3 3",stroke:"#374151"}),(0,t.jsx)(S.XAxis,{dataKey:"date",stroke:"#9ca3af",fontSize:11}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",fontSize:11,tickFormatter:e=>"spend"===n||"revenue"===n?`$${(e/1e3).toFixed(0)}k`:e.toLocaleString()}),(0,t.jsx)(A.Tooltip,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},formatter:e=>[Q.format(e),Q.title.replace(" Analysis","")]}),(0,t.jsx)(eK,{type:"monotone",dataKey:Q.dataKey,stroke:eY[0],strokeWidth:2,fill:`url(#gradient-${n})`})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(x.Award,{className:"w-5 h-5 text-emerald-400"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Top Performers"})]}),(0,t.jsx)("div",{className:"space-y-3",children:q.slice(0,5).map((e,r)=>(0,t.jsxs)(s.default,{href:`/dashboard/clients/${e.customer_id}`,className:"flex items-center justify-between p-3 rounded-lg bg-black/20 hover:bg-black/30 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:`text-lg font-bold ${r<3?"text-emerald-400":"text-gray-400"}`,children:["#",r+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.customer_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["$",e.spend.toLocaleString()," spend"]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"text-lg font-bold",children:Q.format(H(e))})})]},e.customer_id))})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsxs)("h3",{className:"font-semibold mb-4",children:[Q.title.replace(" Analysis","")," by Client"]}),(0,t.jsx)(P.ResponsiveContainer,{width:"100%",height:280,children:(0,t.jsxs)(C,{data:q.slice(0,8),layout:"vertical",children:[(0,t.jsx)(D.CartesianGrid,{strokeDasharray:"3 3",stroke:"#374151"}),(0,t.jsx)(S.XAxis,{type:"number",stroke:"#9ca3af",fontSize:11,tickFormatter:e=>"spend"===n||"revenue"===n?`$${(e/1e3).toFixed(0)}k`:e.toString()}),(0,t.jsx)(k.YAxis,{type:"category",dataKey:"customer_name",stroke:"#9ca3af",fontSize:10,width:100,tick:{width:90}}),(0,t.jsx)(A.Tooltip,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},formatter:e=>[Q.format(e),Q.title.replace(" Analysis","")]}),(0,t.jsx)(w.Bar,{dataKey:Q.sortKey,radius:[0,4,4,0],children:q.slice(0,8).map((e,r)=>(0,t.jsx)(e_.Cell,{fill:eY[r%eY.length]},r))})]})})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold",children:["All Clients - ",Q.title.replace(" Analysis","")]}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:[q.length," clients"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-left text-xs text-gray-400 border-b border-white/10",children:[(0,t.jsx)("th",{className:"pb-3 pr-4",children:"Rank"}),(0,t.jsx)("th",{className:"pb-3 pr-4",children:"Client"}),(0,t.jsx)("th",{className:"pb-3 px-4 text-right",children:Q.title.replace(" Analysis","")}),(0,t.jsx)("th",{className:"pb-3 px-4 text-right",children:"Spend"}),(0,t.jsx)("th",{className:"pb-3 px-4 text-right",children:"Revenue"}),(0,t.jsx)("th",{className:"pb-3 px-4 text-right",children:"ROAS"}),(0,t.jsx)("th",{className:"pb-3 px-4 text-right",children:"Conversions"}),(0,t.jsx)("th",{className:"pb-3 pl-4 text-right",children:"CTR"})]})}),(0,t.jsx)("tbody",{children:q.map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[(0,t.jsx)("td",{className:"py-3 pr-4",children:(0,t.jsxs)("span",{className:`font-bold ${r<3?"text-emerald-400":"text-gray-500"}`,children:["#",r+1]})}),(0,t.jsx)("td",{className:"py-3 pr-4",children:(0,t.jsx)(s.default,{href:`/dashboard/clients/${e.customer_id}`,className:"font-medium hover:text-purple-400 transition-colors",children:e.customer_name})}),(0,t.jsx)("td",{className:"py-3 px-4 text-right font-mono text-sm font-bold",children:Q.format(H(e))}),(0,t.jsxs)("td",{className:"py-3 px-4 text-right font-mono text-sm",children:["$",e.spend.toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,t.jsxs)("td",{className:"py-3 px-4 text-right font-mono text-sm",children:["$",e.revenue.toLocaleString(void 0,{minimumFractionDigits:2})]}),(0,t.jsx)("td",{className:"py-3 px-4 text-right",children:(0,t.jsxs)("span",{className:`font-mono text-sm ${e.roas>=3?"text-emerald-400":e.roas>=2?"text-amber-400":"text-red-400"}`,children:[e.roas.toFixed(1),"x"]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-right font-mono text-sm",children:e.conversions.toLocaleString()}),(0,t.jsxs)("td",{className:"py-3 pl-4 text-right font-mono text-sm",children:[e.ctr.toFixed(2),"%"]})]},e.customer_id))})]})})]}),Q.benchmark&&(0,t.jsxs)("div",{className:"p-6 rounded-xl bg-white/5 border border-white/10",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Performance Benchmarks"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20",children:[(0,t.jsx)("p",{className:"text-sm text-red-400 mb-1",children:"Below Average"}),(0,t.jsxs)("p",{className:"text-xl font-bold",children:[q.filter(e=>H(e)<Q.benchmark.good).length," clients"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["< ",Q.format(Q.benchmark.good)]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[(0,t.jsx)("p",{className:"text-sm text-amber-400 mb-1",children:"Good"}),(0,t.jsxs)("p",{className:"text-xl font-bold",children:[q.filter(e=>H(e)>=Q.benchmark.good&&H(e)<Q.benchmark.excellent).length," clients"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[Q.format(Q.benchmark.good)," - ",Q.format(Q.benchmark.excellent)]})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[(0,t.jsx)("p",{className:"text-sm text-emerald-400 mb-1",children:"Excellent"}),(0,t.jsxs)("p",{className:"text-xl font-bold",children:[q.filter(e=>H(e)>=Q.benchmark.excellent).length," clients"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["≥ ",Q.format(Q.benchmark.excellent)]})]})]})]})]})}e.s(["default",()=>eV],7913)}]);